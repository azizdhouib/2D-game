#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <SDL/SDL.h>
#include <SDL/SDL_image.h>
#include <SDL/SDL_mixer.h>
#include "fonction.h"
void deplacement_clavier(SDL_Surface *tab[],SDL_Surface *screen,SDL_Rect *pos)
{
 int cnt=1,Pos=0,p=1;
 SDL_Event event;
 SDL_Surface *backround=NULL;
 backround=scrolling(tab,Pos);
 SDL_FreeSurface(screen);
 SDL_BlitSurface(backround,NULL,screen,NULL); 
 affichageperso(tab[1],screen,*pos);
 SDL_Flip(screen);
 while(cnt)
 {
  SDL_PollEvent(&event);
  switch(event.type)
  {
   case SDL_QUIT:
    cnt=0;
    break;
   case SDL_KEYDOWN:
    if(event.key.keysym.sym==SDLK_RIGHT)
    {
     p=1;
     if((pos->x>=385)&&(Pos==0))
     {
      Pos=1;
      pos->x=-350;
     }
     pos->x+=5;
     backround=scrolling(tab,Pos);
     SDL_FreeSurface(screen);
     SDL_BlitSurface(backround,NULL,screen,NULL);
     affichageperso(tab[2],screen,*pos);
     SDL_Delay(30);
     pos->x+=5;
     backround=scrolling(tab,Pos);
     SDL_FreeSurface(screen);
     SDL_BlitSurface(backround,NULL,screen,NULL);
     affichageperso(tab[3],screen,*pos);
     SDL_Delay(30);
     pos->x+=5;
     backround=scrolling(tab,Pos);
     SDL_FreeSurface(screen);
     SDL_BlitSurface(backround,NULL,screen,NULL);
     affichageperso(tab[1],screen,*pos);
     SDL_Delay(30);
    }
    else if(event.key.keysym.sym==SDLK_LEFT)
    {
     p=2;
     if((pos->x<=-350)&&(Pos==1))
     {
      Pos=0;
      pos->x=384;
     }
     pos->x-=5;
     backround=scrolling(tab,Pos);
     SDL_FreeSurface(screen);
     SDL_BlitSurface(backround,NULL,screen,NULL);
     affichageperso(tab[5],screen,*pos);
     SDL_Delay(30);
     pos->x-=5;
     backround=scrolling(tab,Pos);
     SDL_FreeSurface(screen);
     SDL_BlitSurface(backround,NULL,screen,NULL);
     affichageperso(tab[6],screen,*pos);
     SDL_Delay(30);
     pos->x-=5;
     backround=scrolling(tab,Pos);
     SDL_FreeSurface(screen);
     SDL_BlitSurface(backround,NULL,screen,NULL);
     affichageperso(tab[4],screen,*pos);
     SDL_Delay(30);
    }
    else if(event.key.keysym.sym==SDLK_UP)
    {
     if(p==1)
     {
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[7],screen,*pos);
      SDL_Delay(100);
      pos->x+=20;
      pos->y-=25;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[8],screen,*pos);
      SDL_Delay(40);
      pos->x+=20;
      pos->y-=25;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[8],screen,*pos);
      SDL_Delay(50);
      pos->x+=20;
      pos->y-=25;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[8],screen,*pos);
      SDL_Delay(50);
      pos->x+=20;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[8],screen,*pos);
      SDL_Delay(50);
      pos->x+=20;
      pos->y+=25;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[8],screen,*pos);
      SDL_Delay(50);
      pos->x+=10;
      pos->y+=35;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[8],screen,*pos);
      SDL_Delay(50);
      pos->y+=15;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[7],screen,*pos);
      SDL_Delay(100);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[1],screen,*pos);
     }
     else
     {
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[30],screen,*pos);
      SDL_Delay(100);
      pos->x-=20;
      pos->y-=25;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[31],screen,*pos);
      SDL_Delay(40);
      pos->x-=20;
      pos->y-=25;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[31],screen,*pos);
      SDL_Delay(50);
      pos->x-=20;
      pos->y-=25;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[31],screen,*pos);
      SDL_Delay(50);
      pos->x-=20;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[31],screen,*pos);
      SDL_Delay(50);
      pos->x-=20;
      pos->y+=25;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[31],screen,*pos);
      SDL_Delay(50);
      pos->x-=10;
      pos->y+=35;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[31],screen,*pos);
      SDL_Delay(50);
      pos->y+=15;
      backround=scrolling(tab,Pos);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[30],screen,*pos);
      SDL_Delay(100);
      SDL_FreeSurface(screen);
      SDL_BlitSurface(backround,NULL,screen,NULL);
      affichageperso(tab[4],screen,*pos);
     }
    }
   }
 }
}

